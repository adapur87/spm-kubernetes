{"componentChunkName":"component---src-pages-prereq-openshift-codeready-containers-mdx","path":"/prereq/openshift/codeready-containers/","result":{"pageContext":{"frontmatter":{"title":"CodeReady Containers","description":"CodeReady Containers","tabs":["OpenShift Overview","CodeReady Containers"]},"relativePagePath":"/prereq/openshift/codeready-containers.mdx","titleType":"page","MdxNode":{"id":"887e4820-d955-51a5-a72d-8a2aba74d63e","children":[],"parent":"379ddcfa-426c-5d02-985e-4cf10e5b0591","internal":{"content":"---\ntitle: CodeReady Containers\ndescription: CodeReady Containers\ntabs: ['OpenShift Overview','CodeReady Containers']\n---\n\n## What is CRC?\n\nCodeReady Containers (CRC) is a minimal, preconfigured OpenShift 4.1 or newer cluster that is designed to run on your local workstation as a development environment for OpenShift.\nFor more information, see [CodeReady Containers](https://github.com/code-ready/crc).\n\nSimilar to Minikube in concept, CRC provides a cloud like environment locally to create and deploy an OpenShift cluster for development and testing purposes.\n\nThis page covers some common CRC operations, including deploying IBM® Cúram Social Program Management (SPM) to the CRC environment. You will use the helm charts produced in [Preparing Helm charts](/deployment/hc_deployment).\n\nFor a full getting started guide for CRC, see [Getting Started Guide CodeReady Containers](https://access.redhat.com/documentation/en-us/red_hat_codeready_containers/1.8/html/getting_started_guide/index)\n\n### Minimum System requirements\n\nCodeReady Containers system requirements can be found here: [CRC Minimum system requirements](https://code-ready.github.io/crc/#minimum-system-requirements_gsg).\n\n<InlineNotification>\n\nThere is a know CRC [issue](https://github.com/code-ready/crc/issues/557) with respect to resource usage. When deploying SPM on CRC our experience has shown that a minimum of 16GB will improve performance, however 32GB is optimal.\n\n</InlineNotification>\n\n## Installing CRC\n\nCreate an account at [RedHat Cloud](https://www.redhat.com/).\nCreate a `$CRC_HOME` folder to use for the purposes of the installation.\nDownload the installation archive from [latest release](https://cloud.redhat.com/openshift/install/crc/installer-provisioned) to `$CRC_HOME` and extract the archive.\nOn the same page, download your pull secret to `$CRC_HOME`. At the time of writing the `latest release` is `1.13.0`.\n\n```shell\ntar -xvf crc-macos-amd64.tar.xz\n```\n\n<InlineNotification>\n\n**Note:**  You have two options, add the binary to the `PATH` environment variable, or move it to `/usr/local/bin/`.\n\n</InlineNotification>\n\n<Tabs>\n\n<Tab label=\"Add to the PATH\">\n<Row>\n<Column>\n\n```shell\nexport PATH=$CRC_HOME/crc-macos-1.10.0-amd64:$PATH`\n```\n\n</Column>\n</Row>\n</Tab>\n\n<Tab label=\"/usr/bin/local \">\n<Row>\n<Column>\n\n```shell\nmv $CRC_HOME/crc-macos-1.10.0-amd64/crc /usr/local/bin\n```\n\n</Column>\n</Row>\n</Tab>\n</Tabs>\n\nWhichever option you choose, you should now have crc in your executable path, to test this run the following command:\n\n```shell\ncrc version\n```\n\nThe output should be similar to the following:\n\n```\ncrc version: 1.10.0+9025021\nOpenShift version: 4.4.3 (embedded in binary)\n```\n\n## Setting up CRC\n\nThe first step is to configure the prerequisites for the OpenShift cluster, including taking control of your hosts and resolver files to provide access to the CRC cluster.\nTo do this run the following command, providing the workstation administrator password as required.\nThis procedure also creates the ~/.crc directory if it does not already exist.\n\n```shell\ncrc setup\n```\n\nNow that the basic configuration is complete, you need to edit the configuration to change the memory limit and add the path to the pull secret file downloaded previously.\n\nTo change the memory limit, set the CPUs to 6, and add the path to the pull secret file downloaded previously. Run the following commands:\n\n```shell\ncrc config set memory 32768\ncrc config set cpus 6\ncrc config set pull-secret-file $CRC_HOME/pull-secret.txt\n```\n\n<InlineNotification>\n\n**Note:**  While CRC's minimum memory allocation requirement is 8GB, only a single replica SPM deployment can be achieved using this.\n\nYou should allocate as many resources as are available.\n\nThe greater the workload the greater the memory and processor requirements.\n\nAny changes to the crc config require you to delete the cluster and start a new one.\n\n</InlineNotification>\n\nYou can always check the configured options of ’crc’, run the following command:\n\n```shell\ncrc config view\n```\n\nAfter setup is complete, start the cluster with 6 CPUs, run the following command:\n\n```shell\ncrc start\n```\n\nThis outputs something similar to the following:\n\n```\nlevel=info msg=\"Checking if oc binary is cached\"\n...\n...\n...\nlevel=info msg=\"To access the cluster, first set up your environment by following 'crc oc-env' instructions\"\nlevel=info msg=\"Then you can access it by running 'oc login -u developer -p developer https://api.crc.testing:6443'\"\nlevel=info msg=\"To login as an admin, run 'oc login -u kubeadmin -p YourPassWordHere https://api.crc.testing:6443'\"\n...\n...\n```\n\nNote the `kubeadmin` and `developer` credentials for later use.\n\n<InlineNotification>\n\n**Note:**  For the rest of the guide you can substitute the credentials you received when you started your cluster for `$KUBEADMN_PSWD` and `$KUBEDEVEL_PSWD`.\n\nAlternatively, these credentials are returned by the `crc console --credentials` command.\nThis guide uses `$KUBEDEVEL_PSWD` and `$KUBEADMN_PSWD` environment variables.\n\nYou may find it convenient to to the same, so you can copy and paste commands without having to switch values:\n\n`export KUBEADMN_PSWD=yourKubeAdminPassword`\n\n`export KUBEDEVEL_PSWD=yourKubeDeveloperPassword`\n\n</InlineNotification>\n\nNext, set up the OpenShift Client `oc`, which is used to administer the CRC cluster:\n\n```shell\ncrc oc-env\neval $(crc oc-env)\n```\n\nIf required you can stop the cluster:\n\n```shell\ncrc stop\n```\n\nOr delete the cluster:\n\n```shell\ncrc delete\n```\n\n## Creating a CRC project\n\nCreate a project for the SPM deployment, again use an environment variable for your convenience when following the guide.\n\nCreate the environment variable, you can set to value to anything you like, but it should consist of lower case alphanumeric characters or `-`, and must start and end with an alphanumeric character (e.g. `my-name`,  or `123-abc`):\n\n```shell\nexport PROJECT=\"ocp\"\n```\n\nLog in as kubeadmin:\n\n```shell\noc login -u kubeadmin -p $KUBEADMN_PSWD https://api.crc.testing:6443\n```\n\nCreate the project:\n\n```shell\noc adm new-project $PROJECT\n```\n\nSwitch kubernetes context to the new project:\n\n```shell\nkubectl config set-context --current --namespace $PROJECT\n```\n\n## Deployment Process\n\nEnable the Image Registry default route:\n\n```shell\noc patch configs.imageregistry.operator.openshift.io/cluster --type merge -p '{\"spec\":{\"defaultRoute\":true}}'\n\n```\n\nAdd relevant roles to user:\n\n```shell\noc adm policy add-cluster-role-to-user registry-viewer kube:admin\n```\n\nLog in to the OpenShift registry:\n\n```shell\ndocker login -u kubeadmin -p $(oc whoami -t) $(oc registry info --public)\n```\n\n<InlineNotification>\n\n`oc registry info --public` should return a URL like `default-route-openshift-image-registry.apps-crc.testing` which is used for publishing images into the internal image registry.\n\nThe image registry URL for use in Helm override values can be retrieved using `oc registry info --internal`: `image-registry.openshift-image-registry.svc:5000`\n\n</InlineNotification>\n\n## Hostname configuration for CRC\n\nThis runbook uses a generic hostname of `spm-ocp.apps-crc.testing` as an example in commands and the configuration files.\nYou should add the CRC IP address to the `hosts` file by using the generic hostname, or else modify the usage of `spm-ocp.apps-crc.testing` in this runbook to reflect your local hostname.\n\n<Tabs>\n\n<Tab label=\"Mac/Linux\">\n<Row>\n<Column>\n\n```shell\necho -e \"$(crc ip)\\tspm-ocp.apps-crc.testing\" | sudo tee -a /etc/hosts\n```\n\n</Column>\n</Row>\n</Tab>\n\n<Tab label=\"Windows\">\n<Row>\n<Column>\n\n```powershell\nAdd-Content -Path C:\\Windows\\System32\\drivers\\etc\\hosts -Value \"$(crc ip)\\tspm-ocp.apps-crc.testing\" -Force\n```\n\n</Column>\n</Row>\n</Tab>\n\n</Tabs>\n\nWhere `crc ip` is the command that returns the CRC VM's IP address that is accessible from your workstation.\n","type":"Mdx","contentDigest":"d98ce1601b405669793ead3861fdc1df","counter":204,"owner":"gatsby-plugin-mdx"},"frontmatter":{"title":"CodeReady Containers","description":"CodeReady Containers","tabs":["OpenShift Overview","CodeReady Containers"]},"exports":{},"rawBody":"---\ntitle: CodeReady Containers\ndescription: CodeReady Containers\ntabs: ['OpenShift Overview','CodeReady Containers']\n---\n\n## What is CRC?\n\nCodeReady Containers (CRC) is a minimal, preconfigured OpenShift 4.1 or newer cluster that is designed to run on your local workstation as a development environment for OpenShift.\nFor more information, see [CodeReady Containers](https://github.com/code-ready/crc).\n\nSimilar to Minikube in concept, CRC provides a cloud like environment locally to create and deploy an OpenShift cluster for development and testing purposes.\n\nThis page covers some common CRC operations, including deploying IBM® Cúram Social Program Management (SPM) to the CRC environment. You will use the helm charts produced in [Preparing Helm charts](/deployment/hc_deployment).\n\nFor a full getting started guide for CRC, see [Getting Started Guide CodeReady Containers](https://access.redhat.com/documentation/en-us/red_hat_codeready_containers/1.8/html/getting_started_guide/index)\n\n### Minimum System requirements\n\nCodeReady Containers system requirements can be found here: [CRC Minimum system requirements](https://code-ready.github.io/crc/#minimum-system-requirements_gsg).\n\n<InlineNotification>\n\nThere is a know CRC [issue](https://github.com/code-ready/crc/issues/557) with respect to resource usage. When deploying SPM on CRC our experience has shown that a minimum of 16GB will improve performance, however 32GB is optimal.\n\n</InlineNotification>\n\n## Installing CRC\n\nCreate an account at [RedHat Cloud](https://www.redhat.com/).\nCreate a `$CRC_HOME` folder to use for the purposes of the installation.\nDownload the installation archive from [latest release](https://cloud.redhat.com/openshift/install/crc/installer-provisioned) to `$CRC_HOME` and extract the archive.\nOn the same page, download your pull secret to `$CRC_HOME`. At the time of writing the `latest release` is `1.13.0`.\n\n```shell\ntar -xvf crc-macos-amd64.tar.xz\n```\n\n<InlineNotification>\n\n**Note:**  You have two options, add the binary to the `PATH` environment variable, or move it to `/usr/local/bin/`.\n\n</InlineNotification>\n\n<Tabs>\n\n<Tab label=\"Add to the PATH\">\n<Row>\n<Column>\n\n```shell\nexport PATH=$CRC_HOME/crc-macos-1.10.0-amd64:$PATH`\n```\n\n</Column>\n</Row>\n</Tab>\n\n<Tab label=\"/usr/bin/local \">\n<Row>\n<Column>\n\n```shell\nmv $CRC_HOME/crc-macos-1.10.0-amd64/crc /usr/local/bin\n```\n\n</Column>\n</Row>\n</Tab>\n</Tabs>\n\nWhichever option you choose, you should now have crc in your executable path, to test this run the following command:\n\n```shell\ncrc version\n```\n\nThe output should be similar to the following:\n\n```\ncrc version: 1.10.0+9025021\nOpenShift version: 4.4.3 (embedded in binary)\n```\n\n## Setting up CRC\n\nThe first step is to configure the prerequisites for the OpenShift cluster, including taking control of your hosts and resolver files to provide access to the CRC cluster.\nTo do this run the following command, providing the workstation administrator password as required.\nThis procedure also creates the ~/.crc directory if it does not already exist.\n\n```shell\ncrc setup\n```\n\nNow that the basic configuration is complete, you need to edit the configuration to change the memory limit and add the path to the pull secret file downloaded previously.\n\nTo change the memory limit, set the CPUs to 6, and add the path to the pull secret file downloaded previously. Run the following commands:\n\n```shell\ncrc config set memory 32768\ncrc config set cpus 6\ncrc config set pull-secret-file $CRC_HOME/pull-secret.txt\n```\n\n<InlineNotification>\n\n**Note:**  While CRC's minimum memory allocation requirement is 8GB, only a single replica SPM deployment can be achieved using this.\n\nYou should allocate as many resources as are available.\n\nThe greater the workload the greater the memory and processor requirements.\n\nAny changes to the crc config require you to delete the cluster and start a new one.\n\n</InlineNotification>\n\nYou can always check the configured options of ’crc’, run the following command:\n\n```shell\ncrc config view\n```\n\nAfter setup is complete, start the cluster with 6 CPUs, run the following command:\n\n```shell\ncrc start\n```\n\nThis outputs something similar to the following:\n\n```\nlevel=info msg=\"Checking if oc binary is cached\"\n...\n...\n...\nlevel=info msg=\"To access the cluster, first set up your environment by following 'crc oc-env' instructions\"\nlevel=info msg=\"Then you can access it by running 'oc login -u developer -p developer https://api.crc.testing:6443'\"\nlevel=info msg=\"To login as an admin, run 'oc login -u kubeadmin -p YourPassWordHere https://api.crc.testing:6443'\"\n...\n...\n```\n\nNote the `kubeadmin` and `developer` credentials for later use.\n\n<InlineNotification>\n\n**Note:**  For the rest of the guide you can substitute the credentials you received when you started your cluster for `$KUBEADMN_PSWD` and `$KUBEDEVEL_PSWD`.\n\nAlternatively, these credentials are returned by the `crc console --credentials` command.\nThis guide uses `$KUBEDEVEL_PSWD` and `$KUBEADMN_PSWD` environment variables.\n\nYou may find it convenient to to the same, so you can copy and paste commands without having to switch values:\n\n`export KUBEADMN_PSWD=yourKubeAdminPassword`\n\n`export KUBEDEVEL_PSWD=yourKubeDeveloperPassword`\n\n</InlineNotification>\n\nNext, set up the OpenShift Client `oc`, which is used to administer the CRC cluster:\n\n```shell\ncrc oc-env\neval $(crc oc-env)\n```\n\nIf required you can stop the cluster:\n\n```shell\ncrc stop\n```\n\nOr delete the cluster:\n\n```shell\ncrc delete\n```\n\n## Creating a CRC project\n\nCreate a project for the SPM deployment, again use an environment variable for your convenience when following the guide.\n\nCreate the environment variable, you can set to value to anything you like, but it should consist of lower case alphanumeric characters or `-`, and must start and end with an alphanumeric character (e.g. `my-name`,  or `123-abc`):\n\n```shell\nexport PROJECT=\"ocp\"\n```\n\nLog in as kubeadmin:\n\n```shell\noc login -u kubeadmin -p $KUBEADMN_PSWD https://api.crc.testing:6443\n```\n\nCreate the project:\n\n```shell\noc adm new-project $PROJECT\n```\n\nSwitch kubernetes context to the new project:\n\n```shell\nkubectl config set-context --current --namespace $PROJECT\n```\n\n## Deployment Process\n\nEnable the Image Registry default route:\n\n```shell\noc patch configs.imageregistry.operator.openshift.io/cluster --type merge -p '{\"spec\":{\"defaultRoute\":true}}'\n\n```\n\nAdd relevant roles to user:\n\n```shell\noc adm policy add-cluster-role-to-user registry-viewer kube:admin\n```\n\nLog in to the OpenShift registry:\n\n```shell\ndocker login -u kubeadmin -p $(oc whoami -t) $(oc registry info --public)\n```\n\n<InlineNotification>\n\n`oc registry info --public` should return a URL like `default-route-openshift-image-registry.apps-crc.testing` which is used for publishing images into the internal image registry.\n\nThe image registry URL for use in Helm override values can be retrieved using `oc registry info --internal`: `image-registry.openshift-image-registry.svc:5000`\n\n</InlineNotification>\n\n## Hostname configuration for CRC\n\nThis runbook uses a generic hostname of `spm-ocp.apps-crc.testing` as an example in commands and the configuration files.\nYou should add the CRC IP address to the `hosts` file by using the generic hostname, or else modify the usage of `spm-ocp.apps-crc.testing` in this runbook to reflect your local hostname.\n\n<Tabs>\n\n<Tab label=\"Mac/Linux\">\n<Row>\n<Column>\n\n```shell\necho -e \"$(crc ip)\\tspm-ocp.apps-crc.testing\" | sudo tee -a /etc/hosts\n```\n\n</Column>\n</Row>\n</Tab>\n\n<Tab label=\"Windows\">\n<Row>\n<Column>\n\n```powershell\nAdd-Content -Path C:\\Windows\\System32\\drivers\\etc\\hosts -Value \"$(crc ip)\\tspm-ocp.apps-crc.testing\" -Force\n```\n\n</Column>\n</Row>\n</Tab>\n\n</Tabs>\n\nWhere `crc ip` is the command that returns the CRC VM's IP address that is accessible from your workstation.\n","fileAbsolutePath":"/home/travis/build/IBM/spm-kubernetes/src/pages/prereq/openshift/codeready-containers.mdx"}}}}